1) Caixa acima do PCP para ativar/desativar sugestão nas células
O que fazer

Criar uma caixa/controle acima do PCP:
“Exibir sugestão de sabor ao clicar nas células” (toggle ON/OFF)

Quando OFF:

Ao clicar na célula, não mostrar sugestão.

Não exibir overlay/popover/tooltip de sugestão (se existir).

Quando ON:

Mantém o comportamento atual (ou implementa, se ainda não existe).

Critério de aceite

Toggle funciona e mantém estado salvo (reabrir página mantém a escolha).

Não afeta edição normal do PCP.

2) Desbloquear 2º sabor da Linha C e do Quilo + Bloqueio por dia em todas as linhas/sabores

Hoje: o 2º sabor da Linha C e Linha do Quilo está bloqueado.

O que fazer

Criar um sistema de bloqueio/desbloqueio por dia e por campo de sabor, aplicável a:

todas as linhas

todos os sabores/campos existentes (1º sabor, 2º sabor, etc.)

Criar UI simples (exemplos aceitáveis):

um ícone de cadeado no cabeçalho do dia por linha (ou dentro da célula)

menu rápido ao clicar com botão “Bloquear/Desbloquear”

Quando um campo está bloqueado:

o usuário não consegue editar (readOnly/disabled)

visualmente aparece “bloqueado” (ex: cadeado + estilo)

O bloqueio deve ser salvo (persistir).

Critério de aceite

O 2º sabor da Linha C e do Quilo passa a poder ser desbloqueado.

Dá pra bloquear/desbloquear qualquer dia/campo em qualquer linha.

Bloqueio persiste após reload.

3) Sugestão de sabor deve atualizar a cada alteração (recalcular dinamicamente)

Exemplo: precisava produzir terça, mas foi movido para quarta → terça deve sugerir outro sabor (se houver necessidade), exceto se ainda estiver pendente.

O que fazer

Toda vez que o usuário:

alterar produção (mudar dia, quantidade, sabor)

apagar produção

editar qualquer célula que afete necessidade/cobertura
…o sistema deve recalcular a sugestão do PCP e atualizar as sugestões exibidas.

Regras

Sugestão deve refletir o estado “real” após a edição.

Evitar “cache sujo” onde sugestão antiga fica parada.

Critério de aceite

Mover produção de um dia para outro atualiza imediatamente as sugestões dos dias afetados.

4) Produções “Exp/exp/Exp.” devem ser ignoradas na autonomia de caixas (mas contar na de tambores)

Às vezes temos exportação nessas linhas:

Identificadores possíveis no nome: “Exp.” “exp.” “Exp” “exp” (variações)

Exemplo: “Maracujá exp.”

O que fazer

Implementar regra:

Se a produção do dia for identificada como exportação (contém “exp” case-insensitive):

ignorar essa produção na autonomia de caixas

manter/contar normalmente na autonomia de tambores

Isso afeta:

cálculo de cobertura/autonomia de caixas

sugestões baseadas em autonomia de caixas

Critério de aceite

Um item “X exp.” não altera a autonomia de caixas.

Mas altera a autonomia/estoque de tambores normalmente.

5) Botão “Lista de produção necessária” + marcar impedimentos com observação/comentário
O que fazer

Criar um botão visível no PCP: “Lista de produção (sugestão)”

Ao clicar, abrir um painel/modal com lista dos produtos que precisam ser produzidos (baseado na sugestão de PCP).

Para cada item da lista:

checkbox: “Não será possível produzir esta semana”

campo de comentário obrigatório ao marcar (ex: “tambores brix baixo”, “falta de película”)

status deve refletir em algum lugar (ex: fica “Em observação”)

Persistir esse status e comentário.

Se um item estiver marcado como “não dá pra produzir”, ele deve:

aparecer como “observação”

não sumir da lógica do sistema, mas deve ser destacado e não ficar “cobrando” o usuário sem contexto.

Critério de aceite

A lista abre, mostra itens realmente necessários.

Usuário marca impedimento + comenta.

Salva e mantém após reload.

Itens marcados ficam claramente identificados como “em observação”.

6) Gráfico “Visualização de cobertura”: tooltip com informações importantes ao passar o mouse
O que fazer

No gráfico de cobertura, ao passar o mouse em um produto/elemento, mostrar tooltip com informações relevantes (mínimo recomendado):

Nome do produto

Estoque atual (ou estimado)

Cobertura/autonomia atual

Meta (ex: 40 dias, se existir)

Necessidade (se existir)

Produções programadas na semana (resumo)

Critério de aceite

Tooltip aparece no hover e mostra info consistente com os dados.

Sem travamentos.

Checklist final (obrigatório)

Implementar mudanças com o mínimo de refatoração.

Garantir que cálculos não quebrem.

Adicionar testes simples (ou uma tela/debug) para validar:

toggle de sugestão

bloqueios

regra do “exp”

atualização dinâmica

Documentar em um arquivo CHANGELOG.md ou seção “Alterações” no README.

FUTURAS (não implementar agora — apenas preparar arquitetura)

Você NÃO deve implementar ainda, mas deve deixar o código preparado para incluir depois sem reescrever tudo.

Futuras: adicionar Linha de Creme (Balde e Pote) + Néctar

Linha Creme:

1º sabor exclusivo para creme

2 campos por dia (um abaixo do outro):

em cima: Balde

em baixo: Pote

Linha Néctar:

substituir o “2º sabor” (ou criar seção) para néctar

até 2 sabores por dia

Regra nova:

creme e néctar são programados por quantidade de caixas, não por tambores

Criar parâmetro configurável:

“Quantos tambores equivalem à quantidade de caixas”

exemplos:

1 batelada pote = 150cx → tambores necessários = X

1 batelada balde = 300un → tambores necessários = Y

Pedir para você criar uma estrutura “config” para esses parâmetros.